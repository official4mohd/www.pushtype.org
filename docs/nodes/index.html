<!DOCTYPE HTML>
<!--[if (lt IE 9)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if (IE 9)&!(IEMobile)]><html class="no-js lt-ie10" lang="en"><![endif]-->
<!--[if gte IE 9]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Nodes - PushType Docs</title>
  

  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">

  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,900|Anonymous+Pro:400">
  <link rel="stylesheet" href="/assets/application.css">

  <script src="/assets/modernizr.js"></script>

  <link rel="shortcut icon" href="/assets/pushtype-favicon.png">
  <meta http-equiv="cleartype" content="on">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  

  <meta name="generator" content="nanoc 3.8.0">
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-1291546-11', 'auto');
  ga('send', 'pageview');
  </script>
</head>
<body class="docs nodes">
  <header class="header">
    <div class="wrap">
      <div class="logo">
        <a href="/"><img src="/assets/pushtype-icon.png" srcset="/assets/pushtype-icon@2x.png 2x" alt="PushType" class="logo-sm"></a>
        <a href="/"><img src="/assets/pushtype-logo.png" srcset="/assets/pushtype-logo@2x.png 2x" alt="PushType" class="logo-lg"></a>
      </div>
      <nav class="main-nav">
        <ul>
          <li class="docs"><a href="/docs/introduction">Documentation</a></li>
          <li class="manifesto"><a href="/manifesto">Manifesto</a></li>
          <li class="comm"><a href="https://discuss.pushtype.org">Community</a></li>
        </ul>
        <ul class="utility">
          <li><a href="https://twitter.com/pushtype" title="Source code"><span class="ficon fi-social-twitter"></span></a></li>
          <li class="ie-end"><a href="https://github.com/pushtype/push_type" title="Source code"><span class="ficon fi-social-github"></span></a></li>
        </ul>
      </nav>
    </div>
  </header>

  <div class="body">
  <div class="wrap">
    <div class="nav-toggle" data-nav-toggle>
      <a href="#menu" title="Menu"><span class="ficon fi-list"></span></a>
    </div>
    <div class="side-col">
      <nav class="side-nav">
        <h4>Getting started</h4>
        <ul>
          <li class="introduction"><a href="/docs/introduction">Introduction</a></li>
          <li class="installation"><a href="/docs/installation">Installation</a></li>
          <li class="key-concepts"><a href="/docs/key-concepts">Key Concepts</a></li>
        </ul>
        <h4>Documentation</h4>
        <ul>
          <li class="configuration"><a href="/docs/configuration">Configuration</a></li>
          <li class="nodes"><a href="/docs/nodes">Nodes</a></li>
          <li class="fields"><a href="/docs/fields">Fields</a></li>
        </ul>
      </nav>
    </div>

    <main class="main">
      <header class="page-title">
        <h1>Nodes</h1>
        
      </header>

      
<p>Nodes are the building blocks of a PushType website. Each node can have siblings and children, so collectively nodes can be arranged to define a tree-like hierarchy of content.</p>

<p>It’s tempting to think of nodes as pages, but they can be so much more. A node can be an article, or an event, or a testimonial, or a promotion… with the power of custom fields a node can be whatever your unique set of requirements demand.</p>

<h2 id="creating-a-node">Creating a node</h2>

<p>PushType provides a Rails generator for creating new nodes. It is invoked by passing a name for the node along with a list of field names and field types.</p>

<pre><code class="language-shell highlight">rails g push_type:node page description:string body:wysiwyg</code></pre>

<p>The command above will create a model at <code>app/models/page.rb</code>, which looks like:</p>

<pre><code class="language-ruby highlight"><span class="k">class</span> <span class="nc">Page</span> <span class="o">&lt;</span> <span class="no">PushType</span><span class="o">::</span><span class="no">Node</span>

  <span class="c1"># By default a node's children can be any other node type.</span>
  <span class="c1"># Optionally pass a list of acceptable node types or prevent</span>
  <span class="c1"># any descendants by passing false.</span>
  <span class="n">has_child_nodes</span> <span class="ss">:all</span>

  <span class="c1"># Model the content by adding custom fields to the node.</span>
  <span class="n">field</span> <span class="ss">:description</span><span class="p">,</span> <span class="ss">:string</span>
  <span class="n">field</span> <span class="ss">:body</span><span class="p">,</span> <span class="ss">:wysiwyg</span>

<span class="k">end</span></code></pre>

<p>The generator also created a view at <code>app/views/nodes/page.rb</code> which is rendered by the <code>NodesFrontEndController</code> when you visit the node’s permalink.</p>

<h2 id="child-nodes">Child nodes</h2>

<p>By default a node’s children can be any other node type. In most cases this is probably undesired. The <code>has_child_nodes</code> class method can be used to whitelist acceptable children (or prevent descendants from the node entirely by passing <code>false</code>).</p>

<p>For example, a typical blog structure might look like this:</p>

<pre><code class="language-ruby highlight"><span class="k">class</span> <span class="nc">Blog</span> <span class="o">&lt;</span> <span class="no">PushType</span><span class="o">::</span><span class="no">Node</span>
  <span class="n">has_child_nodes</span> <span class="ss">:article</span><span class="p">,</span> <span class="ss">order: :blog</span>
<span class="k">end</span></code></pre>

<p>On any node instance, <code>Node#children</code> can be called to return all the children. By default children can be ordered arbitrarily through the admin UI. This behaviour can be overridden by passing an SQL fragment as the <code>:order</code> option.</p>

<p>Note that in the example above, the <code>:order</code> option contains the symbol <code>:blog</code>. This is a bit of shorthand magic, essentially translating as <code>['published_at DESC', 'created_at DESC']</code></p>

<h2 id="custom-fields">Custom fields</h2>

<p>Custom fields are where PushType really begins to flex its muscles. The <code>field</code> class method can be called any number of times, passing the field name, the field type and an optional hash of options for the field type.</p>

<p>For example, an article in our blog might look like this:</p>

<pre><code class="language-ruby highlight"><span class="k">class</span> <span class="nc">Article</span> <span class="o">&lt;</span> <span class="no">PushType</span><span class="o">::</span><span class="no">Node</span>
  <span class="n">field</span> <span class="ss">:excerpt</span><span class="p">,</span> <span class="ss">:text</span>
  <span class="n">field</span> <span class="ss">:body</span><span class="p">,</span> <span class="ss">:wysiwyg</span><span class="p">,</span> <span class="ss">validates: </span><span class="p">{</span> <span class="ss">presence: </span><span class="kp">true</span> <span class="p">}</span>
  <span class="n">field</span> <span class="ss">:testimonial_ids</span><span class="p">,</span> <span class="ss">:relation</span><span class="p">,</span> <span class="ss">multiple: </span><span class="kp">true</span>
  <span class="n">field</span> <span class="ss">:tags</span><span class="p">,</span> <span class="ss">:tag_list</span>
<span class="k">end</span></code></pre>

<p>Hopefully the above is all pretty self explanatory. The real beauty is that this is all there is to it. Each field has it’s own view so the admin UI will automatically render a rich form for your nodes. And because all field data is stored as as <code>jsonb</code> object in the PostgreSQL database, there are no migrations to run.</p>

<p>Custom fields are an incredibly powerful way to shape and model content. PushType comes packaged with a <a href="/docs/fields">wide variety of custom field types</a> each with different options and capabilities.</p>

<h2 id="unexposed-nodes">Unexposed nodes</h2>

<p>By default all node types are exposed to the <code>NodesFrontEndController</code> when visiting the permalink. Sometimes it may be desirable to effectively hide sections of content from the front end. This can be achieved by calling the <code>unexpose!</code> class method on the node model.</p>

<p>For example, you may have a collection of testimonials that are stored in the content tree, but only ever embedded within other pieces of content (i.e. the testimonial shouldn’t be an HTML document available through it’s own permalink). Simples:</p>

<pre><code class="language-ruby highlight"><span class="k">class</span> <span class="nc">Testimonial</span> <span class="o">&lt;</span> <span class="no">PushType</span><span class="o">::</span><span class="no">Node</span>
  <span class="n">unexpose!</span>
<span class="k">end</span></code></pre>

<p>For those that are paying attention, this is exactly the same as adding the node type to the <code>unexposed_nodes</code> <a href="/docs/configuration#unexposed-nodes">configuration option</a>.</p>


      
    </main>
  </div>
</div>

  <footer class="footer">
    <div class="wrap">
      <div class="copy">
        <p>The PushType CMS is free software, lovingly <a href="http://www.pushcode.com">developed by Push Code</a>, and released under the <a href="http://opensource.org/licenses/MIT">MIT license</a>.</p>
        <p>The content of the PushType website is licensed under the <a href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike License</a>.</p>
        <p>PushType &copy; 2015 Push Code Limited.</p>
      </div>
    </div>
  </footer>

  <div class="nav-overlay" data-nav-overlay aria-hidden="true"></div>

  <script src="/assets/application.js"></script>
</body>
</html>
